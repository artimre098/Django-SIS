{% extends 'admin/admin-base.html' %}
{% load static %}
{% block content %}

<div class=" justify-content-between align-items-center"><h5> Student Record</h5></div>

<div class=" d-flex justify-content-between align-items-center">
        <!-- <h2>Welcome {{ record.first_name }} {{ record.last_name }}</h2> -->
        
        <div class="card" style="width: 50rem; margin-right: 20px;">
                <div class="card-body">
                  
                  <h5 class="card-title mb-2 text-muted">{{record.first_name}} {{record.last_name}}</h5>
                  <h6 class="card-subtitle">{{record.student_id}}</h6> <br/>
                  <p class="card-text">Year Level: {{record.year_level}} Year</p>
                  <p class="card-text">Gender: {{record.gender}}</p>
                  <p class="card-text">Birthday: {{record.birthday}}</p>
                  <p class="card-text">Address: {{record.address}}, {{record.city}}</p>
                  <p class="card-text">Email: {{record.email}}</p>
                  <p class="card-text">Phone: {{record.phone}}</p>
                  <a href="{% url 'acs'%}" class="card-link">Back</a>
                </div>
        </div>
        
        <div class="card" style="width: 50rem; ">
                <div class="card-body">
                        <div class="accordion accordion-flush" id="accordionFlushExample">
                                {% if accounts %}
                                        {% for account in accounts %}
                                <div class="accordion-item">
                                  <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-{{account.id}}" aria-expanded="false" aria-controls="flush-{{account.id}}">
                                      {{ account.payable_id}} - â‚± {{ account.amount}}
                                    </button>
                                  </h2>
                                  <div id="flush-{{account.id}}" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                                        
                                        {% if payments %}
                                                {% for payment in payments %}
                                                        {% if record.id == payment.student_id and account.id == payment.payable_id %}
                                                                <div class="accordion-body"> Description: {{ account.description }}<br/> Due date: {{ account.due_date }} <br /> Amount Paid:{{ payment.amount_paid }}</div>
                                                        {% endif %}
                                                {% endfor %}
                                        {% else %}
                                                <div class="accordion-body"> Description: {{ account.description }}<br/> Due date: {{ account.due_date }} <br /> Amount Paid: No payments yet for this account. <br /> <a class="btn btn-primary " href="#"> Pay </a></div>
                                                
                                        {% endif %}
                                </div>
                                </div> 
                                                       
                        
                                        {% endfor %}
                                 {% endif %}
                </div>
        </div>
</div>

{% endblock %}